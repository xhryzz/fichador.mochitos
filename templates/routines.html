{% extends "base.html" %}

{% block title %}Rutinas - Gym Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Mis Rutinas</h1>
    <button class="btn btn-primary" onclick="document.getElementById('addForm').style.display='block'">+ Nueva Rutina</button>
</div>

<div id="addForm" class="modal" style="display: {% if form %}block{% else %}none{% endif %};">
    <div class="modal-content">
        <span class="close" onclick="document.getElementById('addForm').style.display='none'">&times;</span>
        <h2>Nueva Rutina</h2>
        <form method="POST" action="{{ url_for('add_routine') }}">
            {{ form.hidden_tag() if form }}
            <div class="form-group">
                {{ form.name.label if form }}
                {{ form.name(class="form-control") if form }}
            </div>
            <div class="form-group">
                {{ form.description.label if form }}
                {{ form.description(class="form-control", rows="3") if form }}
            </div>
            <button type="submit" class="btn btn-primary">Crear</button>
        </form>
    </div>
</div>

<div class="routines-grid">
    {% for routine in routines %}
    <div class="routine-card">
        <h3>{{ routine.name }}</h3>
        <p>{{ routine.description }}</p>
        <p><small>Creada: {{ routine.created_at.strftime('%d/%m/%Y') }}</small></p>
        <a href="{{ url_for('delete_routine', id=routine.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('¿Eliminar?')">Eliminar</a>
    </div>
    {% else %}
    <p>No tienes rutinas. ¡Crea tu primera rutina!</p>
    {% endfor %}
</div>
{% endblock %}